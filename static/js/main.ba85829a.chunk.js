(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),l=a.n(o),s=(a(66),a(60)),i=a(59),c=a(11),u=a(12),h=a(14),m=a(13),d=a(15),g=a(141),p=a(142),f=a(143),E=a(144),k=a(146),y=a(138),b=a(145),v=a(139),w=a(32),q=a.n(w),C=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={value:""},a.handleChange=function(e){a.setState({value:e.target.value})},a.handleFormSubmit=function(e){e.preventDefault(),a.props.handleRequestError(""),console.log("Form Submitted",a.state.value),q.a.fromAddress(a.state.value).then(function(e){console.log(e),e.results[0].geometry.hasOwnProperty("bounds")?a.props.setCityRectangleBounds(e.results[0].geometry.bounds):a.props.handleRequestError("City named not valid, please verify the data entered (input example: Los Angeles, Tokyo)")},function(e){console.error(e)})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){q.a.setApiKey("AIzaSyCCbmBMSu-C4M53eYTG7b-bXCaEPzQhMqQ"),q.a.enableDebug()}},{key:"render",value:function(){var e=this;return r.a.createElement("form",null,r.a.createElement(k.a,null,r.a.createElement(y.a,null,"Enter a city name: "),r.a.createElement(b.a,{type:"text",value:this.state.value,placeholder:"City Name",onChange:this.handleChange})),r.a.createElement(v.a,{bsStyle:"info",type:"submit",onClick:function(t){return e.handleFormSubmit(t)}},"Submit"),r.a.createElement("h4",{style:{color:"red"}},this.props.errorMessage))}}]),t}(n.Component),M=a(25),O=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={activeMarker:null,selectedPlace:{name:""}},a.onMarkerClick=function(e,t,n){a.props.topTen&&a.props.setHighlightedRow(e),a.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},a.onMapClicked=function(e){a.state.showingInfoWindow&&a.setState({showingInfoWindow:!1,activeMarker:null})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=[];this.props.earthquakeLocations.forEach(function(e){t.push({lat:e.lat,lng:e.lng})}),console.log(t);for(var a=new this.props.google.maps.LatLngBounds,n=0;n<t.length;n++)a.extend(t[n]);return r.a.createElement(M.Map,{google:this.props.google,onClick:this.onMapClicked,bounds:a,zoom:4},this.props.earthquakeLocations.map(function(t,a){return r.a.createElement(M.Marker,{key:a,index:a,onClick:e.onMarkerClick,title:"Earthquake",name:t.datetime,depth:t.depth,magnitude:t.magnitude,position:{lat:t.lat,lng:t.lng}})}),r.a.createElement(M.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow},r.a.createElement("div",null,r.a.createElement("h4",null,"Earthquake Registred"),r.a.createElement("h5",null,"Datetime: ".concat(this.state.selectedPlace.name)),r.a.createElement("h5",null,"Depth: ".concat(this.state.selectedPlace.depth)),r.a.createElement("h5",null,"Magnitude: ".concat(this.state.selectedPlace.magnitude)))))}}]),t}(n.Component),j=Object(M.GoogleApiWrapper)({apiKey:"AIzaSyCCbmBMSu-C4M53eYTG7b-bXCaEPzQhMqQ"})(O),R=a(140),S=function(e){function t(){return Object(c.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(R.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Date and Time of the Earthquake"),r.a.createElement("th",null,"Magnitude"))),r.a.createElement("tbody",null,this.props.earthquakes.slice(0,10).map(function(e,t){return r.a.createElement("tr",{key:t,style:{backgroundColor:e.highlight?"lightgreen":""}},r.a.createElement("td",null,e.datetime),r.a.createElement("td",null,e.magnitude))})))}}]),t}(n.Component),T=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={earthquakeLocations:[],topTenEarthquakes:[],errorMessage:""},a.handleRequestError=function(e){a.setState({errorMessage:e})},a.setHighlightedRow=function(e){console.log(e);var t=Object(i.a)(a.state.topTenEarthquakes);t.forEach(function(e){e.highlight=!1});var n=Object(s.a)({},t[e.index]);n.highlight=!0,t[e.index]=n,a.setState({topTenEarthquakes:t})},a.setCityRectangleBounds=function(e){a.setState({inputCityRectangleBounds:e}),a.fetchEarthquakesInfo()},a.fetchEarthquakesInfo=function(){fetch("http://api.geonames.org/earthquakesJSON?"+"north=".concat(a.state.inputCityRectangleBounds.northeast.lat)+"&south=".concat(a.state.inputCityRectangleBounds.southwest.lat)+"&east=".concat(a.state.inputCityRectangleBounds.northeast.lng)+"&west=".concat(a.state.inputCityRectangleBounds.southwest.lng)+"&username=jsmg").then(function(e){return e.json()}).then(function(e){console.log(e),e.earthquakes.length>0?a.setState({earthquakeLocations:e.earthquakes}):a.handleRequestError("No data of earthquakes found in the input city")})},a.fetchTopTen=function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,r=e.getFullYear()-1,o="".concat(r,"-").concat(n,"-").concat(t);fetch("http://api.geonames.org/earthquakesJSON?north=90&south=-90&east=180&west=-180&maxRows=500&minMagnitude=2&datetime=".concat(o,"&username=jsmg")).then(function(e){return e.json()}).then(function(e){console.log(e);var t=e.earthquakes.filter(function(e){return Date.parse(e.datetime)>Date.parse(o)&&(e.highlight=!1,e)});console.log(t),a.setState({topTenEarthquakes:t})})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.fetchTopTen()}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(g.a,{className:"text-center"}," ANM Assignment  ",r.a.createElement("small",null,"Created with React by Juan Manrique")),r.a.createElement(p.a,null,r.a.createElement(f.a,{md:3,mdOffset:1},r.a.createElement(E.a,null,r.a.createElement(E.a.Heading,null,r.a.createElement("h2",null,"How it works?")),r.a.createElement(E.a.Body,null,r.a.createElement("ol",null,r.a.createElement("li",null,"In the first section you must enter a valid city name in order to display in the map the earthquakes registred in the city; click on the marker to get information regarding the quake. *Note: If given a not valid city addres or a city with no earthquake data, a message should prompt"),r.a.createElement("li",null,"In Section two you are able to see the top ten earthquakes registred within the last year; click on the marker to highlight it in the table."))))),r.a.createElement(f.a,{md:3,mdOffset:0},r.a.createElement(C,{setCityRectangleBounds:this.setCityRectangleBounds,handleRequestError:this.handleRequestError,errorMessage:this.state.errorMessage})),r.a.createElement(f.a,{md:4,style:{minHeight:"350px"}},r.a.createElement(j,{earthquakeLocations:this.state.earthquakeLocations}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(p.a,null,r.a.createElement(E.a,null,r.a.createElement(E.a.Heading,null,r.a.createElement("h2",null,"Top Ten Earthquakes A Year From Now")),r.a.createElement(E.a.Body,null,r.a.createElement(f.a,{md:6,mdOffset:0,style:{}},r.a.createElement(S,{earthquakes:this.state.topTenEarthquakes})),r.a.createElement(f.a,{md:4,style:{minHeight:"350px"}},r.a.createElement(j,{earthquakeLocations:this.state.topTenEarthquakes.slice(0,10),topTen:!0,setHighlightedRow:this.setHighlightedRow}))))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},61:function(e,t,a){e.exports=a(137)},66:function(e,t,a){}},[[61,2,1]]]);
//# sourceMappingURL=main.ba85829a.chunk.js.map